<eform-new-subheader [subtitle]="adminSettingsModel.assemblyVersion">
  <button
    mat-raised-button
    color="accent"
    matTooltip="{{ 'Save settings' | translate }}"
    matTooltipPosition="left"
    id="applicationSettingsSaveBtn"
    (click)="updateAdminSettings()"
  >
    {{ 'Save' | translate }}
  </button>
</eform-new-subheader>

<div class="d-flex flex-column">
  <div class="flex-cards">
    <mat-card class="mat-card-50">
      <mat-card-header>
        <h4 class="d-flex">
          {{ 'Login Page' | translate }}
          <span class="spacer"></span>
          <button
            mat-icon-button
            id="loginPageReset"
            (click)="resetLoginPageSettings()"
            matTooltip="{{ 'Reset' | translate }}"
          >
            <mat-icon>undo</mat-icon>
          </button>
        </h4>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field>
          <mat-label>{{'Main Text' | translate}}</mat-label>
          <input
          matInput
          [(ngModel)]="adminSettingsModel.loginPageSettingsModel.mainText"
          type="text"
          id="mainTextLoginPage">
          <mat-icon
            matSuffix
            (click)="adminSettingsModel.loginPageSettingsModel.mainTextVisible = !adminSettingsModel
                        .loginPageSettingsModel.mainTextVisible"
            id="loginPageMainTextVisibilityToggler"
          >
            {{adminSettingsModel.loginPageSettingsModel.mainTextVisible ? 'visibility' : 'visibility_off'}}
          </mat-icon>
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{'Secondary Text' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.loginPageSettingsModel.secondaryText"
            type="text"
            id="secondaryTextLoginPage">
          <mat-icon
            matSuffix
            (click)="adminSettingsModel.loginPageSettingsModel.secondaryTextVisible = !adminSettingsModel
                        .loginPageSettingsModel.secondaryTextVisible"
            id="loginPageSecondaryTextVisibilityToggler"
          >
            {{adminSettingsModel.loginPageSettingsModel.secondaryTextVisible ? 'visibility' : 'visibility_off'}}
          </mat-icon>
        </mat-form-field>
        <div class="d-flex flex-wrap justify-content-between">
          <div>
            <p class="mb-0 align-self-center">
              {{ 'Image' | translate }}
            </p>
            <img
              alt=""
              *ngIf="loginPageImageLink"
              class="p-3"
              height="112"
              width="90"
              [src]="loginPageImageLink | authImage | async"
            />
          </div>
          <div class="d-flex">
            <div class="align-self-center">
              <p>{{ 'Recommended parameters' | translate }}:</p>
              <p>{{ 'Resolution' | translate }} - 90x100</p>
              <p>{{ 'Proportions' | translate }} - 1:1.5</p>
            </div>
            <div class="align-self-center align-self-end mb-3">
              <button
                mat-raised-button
                color="primary"
                *ngIf="loginPageImageUploader?.queue?.length === 0"
                id="loginPageImageUploadBtn"
                (click)="loginPagefileInput.click()"
              >
                {{ 'Upload' | translate }}
              </button>
              <button
                mat-raised-button
                color="warn"
                *ngIf="loginPageImageUploader?.queue?.length > 0"
                (click)="loginPagefileInput.click()"
              >
                {{ 'Pending' | translate }}
              </button>
              <input
                class="input-invisible"
                type="file"
                ng2FileSelect
                #loginPagefileInput
                [uploader]="loginPageImageUploader"
                id="loginPageFileInput"
              />
              <button
                mat-icon-button
                id="loginPageImageVisibilityToggler"
                (click)="adminSettingsModel.loginPageSettingsModel.imageLinkVisible = !adminSettingsModel
                          .loginPageSettingsModel.imageLinkVisible">
                <mat-icon>
                  {{adminSettingsModel.loginPageSettingsModel.imageLinkVisible ? 'visibility' : 'visibility_off'}}
                </mat-icon>
              </button>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
    <mat-card class="mat-card-50">
      <mat-card-header>
        <h4 class="d-flex">
          {{ 'Site header' | translate }}
          <span class="spacer"></span>
          <button
            mat-icon-button
            id="siteHeaderReset"
            (click)="resetHeaderSettings()"
            matTooltip="{{ 'Reset' | translate }}"
          >
            <mat-icon>undo</mat-icon>
          </button>
        </h4>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field>
          <mat-label>{{'Main Text' | translate}}</mat-label>
          <input
            name="headerSettingsMainText"
            id="headerSettingsMainText"
            matInput
            [(ngModel)]="adminSettingsModel.headerSettingsModel.mainText"
            type="text">
          <mat-icon
            matSuffix
            (click)="adminSettingsModel.headerSettingsModel.mainTextVisible = !adminSettingsModel
                        .headerSettingsModel.mainTextVisible"
            id="siteHeaderMainTextToggler"
          >
            {{adminSettingsModel.headerSettingsModel.mainTextVisible ? 'visibility' : 'visibility_off'}}
          </mat-icon>
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{'Secondary Text' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.headerSettingsModel.secondaryText"
            type="text"
            name="headerSettingsSecondaryText"
            id="headerSettingsSecondaryText">
          <mat-icon
            matSuffix
            (click)="adminSettingsModel.headerSettingsModel.secondaryTextVisible = !adminSettingsModel
                        .headerSettingsModel.secondaryTextVisible"
            id="siteHeaderSecondaryTextToggler"
          >
            {{adminSettingsModel.headerSettingsModel.secondaryTextVisible ? 'visibility' : 'visibility_off'}}
          </mat-icon>
        </mat-form-field>
        <div class="d-flex flex-wrap justify-content-between">
          <div>
            <p class="mb-0 align-self-center">
              {{ 'Logo' | translate }}
            </p>
            <img
              alt=""
              *ngIf="headerImageLink"
              class="p-3"
              width="150"
              [src]="headerImageLink | authImage | async"
            />
          </div>
          <div class="d-flex">
            <div class="align-self-center">
              <p>{{ 'Recommended parameters' | translate }}:</p>
              <p>{{ 'Resolution' | translate }} - 170x80</p>
              <p>{{ 'Proportions' | translate }} - 2:1</p>
            </div>
            <div class="align-self-center align-self-end mb-3">
              <button
                mat-raised-button
                color="primary"
                *ngIf="headerImageUploader?.queue?.length === 0"
                id="siteHeaderUploadBtn"
                (click)="headerImageUploaderInput.click()"
              >
                {{ 'Upload' | translate }}
              </button>
              <button
                mat-raised-button
                color="warn"
                *ngIf="headerImageUploader?.queue?.length > 0"
                (click)="headerImageUploaderInput.click()"
              >
                {{ 'Pending' | translate }}
              </button>
              <input
                class="input-invisible"
                type="file"
                ng2FileSelect
                [uploader]="headerImageUploader"
                #headerImageUploaderInput
                id="siteHeaderFileInput"
              />
              <button
                mat-icon-button
                id="siteHeaderImageVisibilityToggler"
                (click)="adminSettingsModel.headerSettingsModel.imageLinkVisible = !adminSettingsModel
                          .headerSettingsModel.imageLinkVisible">
                <mat-icon>
                  {{adminSettingsModel.headerSettingsModel.imageLinkVisible ? 'visibility' : 'visibility_off'}}
                </mat-icon>
              </button>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
  <div class="mt-4">
    <mat-card>
      <mat-card-header>
        <h4>
          {{ 'SDK information' | translate }}
        </h4>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field>
          <mat-label>{{'Customer no' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.sdkSettingsModel.customerNo"
            type="text"
            name="customerNo"
            id="customerNo">
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{'File location picture' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.sdkSettingsModel.fileLocationPicture"
            type="text"
            name="fileLocationPicture"
            id="fileLocationPicture">
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{'File location PDF' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.sdkSettingsModel.fileLocationPdf"
            type="text"
            name="fileLocationPdf"
            id="fileLocationPdf">
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{'File location Jasper report files' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.sdkSettingsModel.fileLocationReports"
            type="text"
            name="fileLocationReports"
            id="fileLocationReports">
        </mat-form-field>
        <mat-form-field>
          <mat-label>{{'Http server address' | translate}}</mat-label>
          <input
            matInput
            [(ngModel)]="adminSettingsModel.sdkSettingsModel.httpServerAddress"
            type="text"
            name="httpServerAddress"
            id="httpServerAddress">
        </mat-form-field>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="flex-cards mt-4">
    <mat-card class="mat-card-50">
      <mat-card-header>
        <h4>{{ 'Storage information' | translate }}</h4>
      </mat-card-header>
      <mat-card-content>
        <section class="d-flex flex-column">
          <mat-checkbox
            id="swiftEnabled"
            [(ngModel)]="adminSettingsModel.swiftSettingsModel.swiftEnabled"
          >{{'Swift enabled' | translate}}
          </mat-checkbox>
          <mat-checkbox
            id="s3Enabled"
            [(ngModel)]="adminSettingsModel.s3SettingsModel.s3Enabled"
          >{{'S3 enabled' | translate}}
          </mat-checkbox>
        </section>
        <ng-container *ngIf="adminSettingsModel.swiftSettingsModel.swiftEnabled">
          <mat-form-field>
            <mat-label>{{'User name' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.swiftSettingsModel.swiftUserName"
              placeholder="eformsdk"
              type="text"
              name="swiftUserName"
              id="swiftUserName">
          </mat-form-field>
          <mat-form-field>
            <mat-label>{{'Password' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.swiftSettingsModel.swiftPassword"
              placeholder="eformsdktosecretpassword"
              type="password"
              name="swiftPassword"
              id="swiftPassword">
          </mat-form-field>
          <mat-form-field>
            <mat-label>{{'Swift endpoint' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.swiftSettingsModel.swiftEndpoint"
              placeholder="http://172.16.4.4:8080/swift/v1"
              type="text"
              name="swiftEndpoint"
              id="swiftEndpoint">
          </mat-form-field>
          <mat-form-field>
            <mat-label>{{'Keystone endpoint' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.swiftSettingsModel.keystoneEndpoint"
              placeholder="http://172.16.4.4:5000/v2.0"
              type="text"
              name="keystoneEndpoint"
              id="keystoneEndpoint">
          </mat-form-field>
        </ng-container>
        <ng-container *ngIf="adminSettingsModel.s3SettingsModel.s3Enabled">
          <mat-form-field>
            <mat-label>{{'S3 accessKey' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.s3SettingsModel.s3AccessKeyId"
              placeholder="false"
              type="text"
              name="s3AccessKeyId"
              id="s3AccessKeyId">
          </mat-form-field>
          <mat-form-field>
            <mat-label>{{'S3 secretAccessKey' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.s3SettingsModel.s3SecrectAccessKey"
              placeholder="false"
              type="password"
              name="s3SecrectAccessKey"
              id="s3SecrectAccessKey">
          </mat-form-field>
          <mat-form-field>
            <mat-label>{{'S3 endpoint' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.s3SettingsModel.s3Endpoint"
              placeholder="false"
              type="text"
              name="s3Endpoint"
              id="s3Endpoint">
          </mat-form-field>
          <mat-form-field>
            <mat-label>{{'S3 bucket name' | translate}}</mat-label>
            <input
              matInput
              [(ngModel)]="adminSettingsModel.s3SettingsModel.s3BucketName"
              placeholder="false"
              type="password"
              name="s3BucketName"
              id="s3BucketName">
          </mat-form-field>
        </ng-container>
      </mat-card-content>
    </mat-card>
    <mat-card class="mat-card-50">
      <mat-card-header>
        <h4>{{ 'SendGrid Information' | translate }}</h4>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field>
          <mat-label>{{'Key' | translate}}</mat-label>
          <input
            matInput
            placeholder="12345678909876543210adfecdfefdae"
            type="password"
            name="sendGridKey"
            id="sendGridKey"
            [(ngModel)]="adminSettingsModel.sendGridSettingsModel.apiKey">
        </mat-form-field>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="flex-cards mt-4">
    <mat-card class="mat-card-50">
      <mat-card-header>
        <h4>{{ 'Other' | translate }}</h4>
      </mat-card-header>
      <mat-card-content>
          <mat-checkbox
            id="isEnableWidget"
            [(ngModel)]="othersSettings.isEnableWidget"
            [ngModelOptions]="{standalone: true}"
          >{{'Userback widget' | translate}}
          </mat-checkbox>
      </mat-card-content>
    </mat-card>
  </div>
</div>
