<eform-new-subheader>
  <button
    class="btn-primary btn-primary--icon-left"
    id="createEntitySearchBtn"
    matTooltip="{{ 'Create new searchable list' | translate }}"
    *ngIf="selectCurrentUserClaimsEntitySearchCreate$ | async"
    matTooltipPosition="left"
    [routerLink]="['/advanced/entity-search/create']"
  >
    <mat-icon>add</mat-icon>
    <span>{{ 'New list' | translate }}</span>
  </button>
</eform-new-subheader>

<ng-template #toolbarTpl>
  <div class="d-flex flex-row justify-content-start flex-nowrap">
    <div class="d-flex flex-column mr-2 ml-2">
      <mat-form-field>
        <mat-label>{{ 'Search' | translate }}</mat-label>
        <input
          matInput
          type="text"
          (ngModelChange)="onSearchChanged($event)"
          [ngModel]="selectEntitySearchNameFilter$ | async"
          id="labelInput"
        />
      </mat-form-field>
    </div>
  </div>
</ng-template>

<mtx-grid
  [data]="advEntitySearchableGroupListModel.entities"
  [columns]="tableHeaders"
  [cellTemplate]="{microtingUUID: microtingUUIDTpl, name: entitySelectNameTpl, description: entitySelectDescriptionTpl, actions: actionsTpl}"
  [showPaginator]="true"
  [paginationTemplate]="paginatorTpl"
  [pageOnFront]="false"
  [rowStriped]="false"
  [showToolbar]="true"
  [showColumnMenuButton]="false"
  [toolbarTemplate]="toolbarTpl"
  [sortActive]="selectEntitySearchSort$ | async"
  [sortDirection]="selectEntitySearchIsSortDsc$ | async"
  (sortChange)="sortTable($event)">
</mtx-grid>
<ng-template #microtingUUIDTpl let-row let-i="index">
  <div class="entitySearchMUid" id="entitySearchMUid">{{ row.microtingUUID }}</div>
</ng-template>
<ng-template #entitySelectNameTpl let-row let-i="index">
  <div class="entitySearchName" id="entitySearchName">{{ row.name }}</div>
</ng-template>
<ng-template #entitySelectDescriptionTpl let-row let-i="index">
  <div class="entitySelectDescription" id="entitySelectDescription">{{ row.description }}</div>
</ng-template>

<ng-template #actionsTpl let-row let-i="index">
  <div id="action-items{{i}}"
       *ngIf="(selectCurrentUserClaimsEntitySearchDelete$ | async) || (selectCurrentUserClaimsEntitySearchUpdate$ | async)">
    <button id="actionMenu" mat-icon-button [matMenuTriggerFor]="menu" matTooltip="{{ 'Actions' | translate }}">
      <mat-icon>more_vert</mat-icon>
    </button>

    <mat-menu #menu="matMenu">
      <button
        mat-menu-item
        id="entitySearchUpdateBtn{{i}}"
        [disabled]="(selectCurrentUserClaimsEntitySearchUpdate$ | async) === false"
        [routerLink]="['/advanced/entity-search/edit/' + row.microtingUUID]"
      >
        <mat-icon>edit</mat-icon>
        <span>{{ 'Edit' | translate }}</span>
      </button>

      <button
        mat-menu-item
        id="entitySearchDeleteBtn{{i}}"
        (click)="openModalSearchRemove(row)"
        [disabled]="(selectCurrentUserClaimsEntitySearchDelete$ | async) === false || row.isLocked"
      >
        <mat-icon  color="warn">delete</mat-icon>
        <span>{{ 'Remove' | translate }}</span>
      </button>
    </mat-menu>
  </div>
</ng-template>

<!--Here you can choose approach as you like: container-row, or flex, or just element with required styles and markup-->
<ng-template #paginatorTpl>
  <eform-pagination
    [pagination]="selectEntitySearchPagination$ | async"
    (paginationChanged)="onPaginationChanged($event)"
  ></eform-pagination>
</ng-template>
