<eform-new-subheader>
  <div>
    <button
      mat-raised-button
      color="accent"
      matTooltip="Save settings"
      id="ProfileSettingsSaveBtn"
      (click)="updateUserProfileSettings()"
    >
      {{ 'Save' | translate }}
    </button>
  </div>
</eform-new-subheader>

<div style="
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-start;
">
  <mat-card>
    <mat-card-header> {{ 'Google Authenticator' | translate }}</mat-card-header>
    <mat-card-content>
      <div class="mb-1">
        <mat-checkbox
          id="2fauthForsed"
          (change)="isTwoFactorEnabledCheckBoxChanged($event)"
          [(ngModel)]="googleAuthInfoModel.isTwoFactorEnabled"
          color="primary"
        >
          {{ 'Status' | translate }}
        </mat-checkbox>
      </div>
      <p class="text-danger">
        ({{ 'change will logout you from the application' | translate }})
      </p>
      <ng-container *ngIf="googleAuthInfoModel.psk">
        <div class="p-0">
          <div
            [innerHTML]="'Google Authenticator description' | translate"
          ></div>
          <p>
            <strong>{{ googleAuthInfoModel.psk }}</strong>
          </p>
        </div>
        <div class="p-0">
          <button
            mat-raised-button
            color="warn"
            id="deleteGoogleAuthenticatorInfo"
            matTooltip="{{
                    'Remove google authenticator secret key' | translate
                  }}"
            (click)="deleteGoogleAuthenticatorInfo()"
          >
            {{ 'Remove PSK' | translate }}
          </button>
        </div>
      </ng-container>
    </mat-card-content>
  </mat-card>

  <mat-card>
    <mat-card-header> {{ 'General' | translate }}</mat-card-header>
    <mat-card-content>
      <mat-form-field>
        <mat-label>{{ 'Language' | translate }}</mat-label>
        <mtx-select
          *ngIf="authStateService.isAdmin"
          id="ProfileLanguageSelector"
          [bindLabel]="'text'"
          [bindValue]="'locale'"
          [clearable]="false"
          [(ngModel)]="userSettingsModel.locale"
          [items]="languages"
        ></mtx-select>
      </mat-form-field>
      <mat-form-field>
        <mat-label>{{ 'Formats' | translate }}</mat-label>
        <mtx-select
          *ngIf="authStateService.isAdmin"
          id="ProfileFormatSelector"
          [bindLabel]="'text'"
          [bindValue]="'id'"
          [clearable]="false"
          [(ngModel)]="userSettingsModel.formats"
          [items]="countries"
        ></mtx-select>
      </mat-form-field>
      <mat-form-field>
        <mat-label>{{ 'Timezone' | translate }}</mat-label>
        <mtx-select
          *ngIf="authStateService.isAdmin"
          id="ProfileTimeZoneSelector"
          [bindLabel]="'name'"
          [bindValue]="'id'"
          [clearable]="false"
          [(ngModel)]="userSettingsModel.timeZone"
          [items]="timeZones.timeZoneModels"
        ></mtx-select>
      </mat-form-field>
      <div class="mb-1">
        <mat-checkbox
          id="darkTheme"
          [(ngModel)]="userSettingsModel.darkTheme"
        >
          {{ 'Dark theme' | translate }}
        </mat-checkbox>
      </div>
    </mat-card-content>
  </mat-card>
</div>
